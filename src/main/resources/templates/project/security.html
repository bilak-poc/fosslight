<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="project/security-header :: headerFragment"></th:block>
<th:block th:replace="fragments/gridCommonFn :: gridCommonFn"></th:block>
<th:block th:replace="project/security-script :: contentScript"></th:block>
<body class="hold-transition sidebar-mini">
    <!-- Site wrapper -->
    <div class="wrapper">
        <div class="content-wrapper custom-layout">
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-sm-10 text-left mt-2">
                               <span class="description-percentage text-lg text-dark-gray">
                                <a class="text-dark-gray text-bold hover-line" href="#"
                                   title="Go to Basic information tab" th:onclick="fn.mvEditTab([[${project.prjId}]])">[[${project.prjName}]]</a>
                                </span>
                            <span class="ml-2">
                            <span class="mx-2">
                                <th:block th:if="${project.status == 'DROP'}">
                                    <span class="text-gray text-md text-bold">Drop</span>
                                </th:block>
                                <th:block th:if="${project.status == 'REQ'}">
                                    <span class="text-pink text-md text-bold">Request</span>
                                </th:block>
                                <th:block th:if="${project.status == 'REV'}">
                                    <th:block th:if="${(project.verificationStatus == 'CONF' and project.destributionStatus == 'DONE')
                                    or (project.verificationStatus == 'CONF' and project.destributionStatus == 'NA')
                                    or (project.verificationStatus == 'NA' and project.destributionStatus == 'NA')}">
                                        <span class="text-purple text-md text-bold">Final Review</span>
                                    </th:block>
                                    <th:block
                                            th:unless="${(project.verificationStatus == 'CONF' and project.destributionStatus == 'DONE') or (project.verificationStatus == 'CONF' and project.destributionStatus == 'NA') or (project.verificationStatus == 'NA' and project.destributionStatus == 'NA')}">
                                        <span class="text-yellow text-md text-bold">Review</span>
                                    </th:block>
                                </th:block>
                                <th:block th:if="${project.status == 'COMP'}">
                                    <span class="text-dark text-md text-bold">Complete</span>
                                </th:block>
                                <th:block
                                        th:unless="${project.status == 'COMP' or project.status == 'DROP' or project.status == 'REQ' or project.status == 'REV'}">
                                    <span class="text-success text-md text-bold">Progress</span>
                                </th:block>
                            </span>
                            <span class="mx-2">
                                 <!--indetification-->
                                <th:block th:if="${project.identificationStatus == null}">
                                    <th:block th:if="${project.status == 'DROP'}">
                                        <span class="badge badge-outline-gray-white size-md width-6rem">Identification</span>
                                    </th:block>
                                    <th:block th:unless="${project.status == 'DROP'}">
                                        <span class="badge badge-success size-md width-6rem"
                                              th:onclick="fn.mvIdentification([[${project.prjId}]])">Identification</span>
                                    </th:block>
                                </th:block>

                                <th:block th:if="${project.identificationStatus == 'N/A'}">
                                    <span class="badge badge-outline-gray-white size-md width-6rem">Identification</span>
                                </th:block>

                                <th:block
                                        th:unless="${project.identificationStatus == null or project.identificationStatus == 'N/A'}">
                                   <th:block th:if="${project.status == 'DROP'}">
                                       <th:block th:if="${project.identificationStatus == 'CONF'}">
                                           <span class="badge badge-gray size-md width-6rem"
                                                 th:onclick="fn.mvIdentification([[${project.prjId}]])">Identification</span>
                                       </th:block>
                                        <th:block th:unless="${project.identificationStatus == 'CONF'}">
                                           <span class="badge badge-gray size-md width-6rem"
                                                 th:onclick="fn.mvIdentification([[${project.prjId}]])">Identification</span>
                                       </th:block>
                                    </th:block>
                                    <th:block
                                            th:if="${project.status == 'REV' and ((project.verificationStatus == 'CONF' and project.destributionStatus == 'DONE') or (project.verificationStatus == 'CONF' and project.destributionStatus == 'NA') or (project.verificationStatus == 'NA' and project.destributionStatus == 'NA'))}">
                                        <span class='badge badge-outline-dark-blue hover-light-btn text-sm px-2 py-1'
                                              style='cursor:pointer;'
                                              th:onclick="fn.mvIdentification([[${project.prjId}]])">Identification</span>
                                    </th:block>
                                    <th:block
                                            th:unless="${project.status == 'DROP' or (project.status == 'REV' and ((project.verificationStatus == 'CONF' and project.destributionStatus == 'DONE') or (project.verificationStatus == 'CONF' and project.destributionStatus == 'NA') or (project.verificationStatus == 'NA' and project.destributionStatus == 'NA')))}">
                                        <th:block th:if="${project.identificationStatus == 'CONF'}">
                                            <span class='badge badge-outline-dark-blue hover-light-btn text-sm px-2 py-1'
                                                  style='cursor:pointer;'
                                                  th:onclick="fn.mvIdentification([[${project.prjId}]])">Identification</span>
                                        </th:block>
                                        <th:block th:unless="${project.identificationStatus == 'CONF'}">
                                            <th:block th:if="${project.status == 'REQ'}">
                                                <span class='badge badge-pink hover-pink-btn text-sm px-2 py-1'
                                                      style='cursor:pointer;'
                                                      th:onclick="fn.mvIdentification([[${project.prjId}]])">Identification</span>
                                            </th:block>
                                            <th:block th:if="${project.status == 'REV'}">
                                                <span class='badge badge-yellow hover-yellow-btn text-sm px-2 py-1'
                                                      style='cursor:pointer;'
                                                      th:onclick="fn.mvIdentification([[${project.prjId}]])">Identification</span>
                                            </th:block>
                                            <th:block
                                                    th:unless="${project.status == 'COMP' or project.status == 'DROP' or project.status == 'REQ' or project.status == 'REV'}">
                                                <span class='badge badge-success hover-success-btn text-sm px-2 py-1'
                                                      style='cursor:pointer;'
                                                      th:onclick="fn.mvIdentification([[${project.prjId}]])">Identification</span>
                                            </th:block>
                                        </th:block>
                                    </th:block>
                                </th:block>

                                <!--packaging-->
                                 <th:block th:if="${project.identificationStatus != 'CONF'}">
                                         <span class="text-gray-white text-bold text-md mx-1">&gt;</span>
                                        <span class="badge badge-outline-gray-white text-sm px-2 py-1">Packaging</span>
                                </th:block>
                                <th:block th:unless="${project.identificationStatus != 'CONF'}">
<th:block th:if="${project.verificationStatus == null}">
                                   <th:block th:if="${project.status == 'COMP' or project.statusRequestYn == 'Y'}">
                                        <span class="text-gray-white text-bold text-md mx-1">&gt;</span>
                                        <span class="badge badge-outline-gray-white text-sm px-2 py-1">Packaging</span>
                                    </th:block>
                                    <th:block th:unless="${project.status == 'COMP' or project.statusRequestYn == 'Y'}">
                                        <th:block th:unless="${project.identificationStatus == null}">
                                            <span class="text-blue-gray text-bold text-md mx-1">&gt;</span>
                                            <span class='badge badge-success hover-success-btn size-sm width-6rem'
                                                  style='cursor:pointer;'
                                                  th:onclick="fn.mvVerification([[${project.prjId}]])">Packaging</span>
                                        </th:block>
                                    </th:block>
                                </th:block>
                                <th:block th:if="${project.verificationStatus == 'PROG'}">
                                    <th:block th:if="${project.status == 'COMP' or project.statusRequestYn == 'Y'}">
                                        <span class="text-gray-white text-bold text-md mx-1">&gt;</span>
                                        <span class="badge badge-outline-gray-white text-sm px-2 py-1">Packaging</span>
                                    </th:block>
                                    <th:block th:unless="${project.status == 'COMP' or project.statusRequestYn == 'Y'}">
                                        <span class="text-blue-gray text-bold text-md mx-1">&gt;</span>
                                        <span class='badge badge-success hover-success-btn size-sm width-6rem'
                                              style='cursor:pointer;'
                                              th:onclick="fn.mvVerification([[${project.prjId}]])">Packaging</span>
                                    </th:block>
                                </th:block>
                               <th:block th:if="${project.verificationStatus == 'NA'}">
                                   <span class="text-gray-white text-bold text-md mx-1">&gt;</span>
                                   <span class="badge badge-outline-gray-white size-sm width-6rem">Packaging</span>
                               </th:block>
                                <th:block th:if="${project.verificationStatus == 'Error'}">
                                    <span class="text-gray-white text-bold text-md mx-1">&gt;</span>
                                   <span class="badge badge-outline-gray-white size-sm width-6rem">Packaging</span>
                                </th:block>
                                <th:block th:if="${project.verificationStatus == 'Drop'}">
                                    <span class="text-gray-white text-bold text-md mx-1">&gt;</span>
                                   <span class="badge badge-outline-gray-white size-sm width-6rem">Packaging</span>
                                </th:block>
                                <th:block
                                        th:unless="${project.verificationStatus == null or project.verificationStatus == 'PROG' or project.verificationStatus == 'NA' or project.verificationStatus == 'Error' or project.verificationStatus == 'Drop'}">
                                    <th:block th:if="${project.distributeTarget == 'N/A'}">
                                        <span class="text-gray-white text-bold text-md mx-1">&gt;</span>
                                        <span class="badge badge-outline-gray-white size-sm width-6rem">Packaging</span>
                                    </th:block>
                                    <th:block th:unless="${project.distributeTarget == 'N/A'}">
                                        <th:block th:if="${project.verificationStatus == 'CONF'}">
                                          <span class="text-blue-gray text-bold text-md mx-1">&gt;</span>
                                                    <span class='badge badge-outline-dark-blue hover-light-btn size-sm width-6rem'
                                                          style='cursor:pointer;'
                                                          th:onclick="fn.mvVerification([[${project.prjId}]])">Packaging</span>
                                        </th:block>
                                        <th:block th:unless="${project.verificationStatus == 'CONF'}">
                                            <th:block th:if="${project.status == 'PROG'}">
                                                <span class="text-blue-gray text-bold text-md mx-1">&gt;</span>
                                                <span class='badge badge-success hover-success-btn size-sm width-6rem'
                                                      style='cursor:pointer;'
                                                      th:onclick="fn.mvVerification([[${project.prjId}]])">Packaging</span>
                                            </th:block>
                                            <th:block th:if="${project.status == 'REQ'}">
                                                <span class="text-blue-gray text-bold text-md mx-1">&gt;</span>
                                                <span class='badge badge-outline-dark-blue hover-light-btn size-sm width-6rem'
                                                      style='cursor:pointer;'
                                                      th:onclick="fn.mvVerification([[${project.prjId}]])">Packaging</span>
                                            </th:block>
                                            <th:block th:if="${project.status == 'REV'}">
                                                <th:block th:if="${(project.verificationStatus == 'CONF' and project.destributionStatus == 'DONE')
                                                    or (project.verificationStatus == 'CONF' and project.destributionStatus == 'NA')
                                                    or (project.verificationStatus == 'NA' and project.destributionStatus == 'NA')}">
                                                    <span class="text-blue-gray text-bold text-md mx-1">&gt;</span>
                                                    <span class='badge badge-outline-dark-blue hover-light-btn size-sm width-6rem'
                                                          style='cursor:pointer;'
                                                          th:onclick="fn.mvVerification([[${project.prjId}]])">Packaging</span>
                                                </th:block>
                                                <th:block
                                                        th:unless="${(project.verificationStatus == 'CONF' and project.destributionStatus == 'DONE') or (project.verificationStatus == 'CONF' and project.destributionStatus == 'NA') or (project.verificationStatus == 'NA' and project.destributionStatus == 'NA')}">
                                                    <span class="text-blue-gray text-bold text-md mx-1">&gt;</span>
                                                    <span class='badge badge-yellow hover-yellow-btn size-sm width-6rem'
                                                          style='cursor:pointer;'
                                                          th:onclick="fn.mvVerification([[${project.prjId}]])">Packaging</span>
                                                </th:block>
                                            </th:block>
                                        </th:block>
                                    </th:block>
                                </th:block>
                                </th:block>
                            </span>
                                <!--vulnerability-->
                            <span class="mx-2">
                                <th:block th:unless="${project.secCode == null}">
                                    <th:block th:if="${project.secCvssScore >= 7.0}">
                                        <th:blcok th:if="${project.secCode == 'Fixed'}">
                                            <span class="badge badge-cherry text-md width-9rem pointer p-1" th:onclick="fn.mvSecurityTab([[${project.prjId}]])">Resolved([[${project.secCvssScore}]])</span>
                                        </th:blcok>
                                         <th:blcok th:unless="${project.secCode == 'Fixed'}">
                                             <span class="badge badge-cherry text-md width-9rem pointer p-1" th:onclick="fn.mvSecurityTab([[${project.prjId}]])">Need to resolve([[${project.secCvssScore}]])</span>
                                        </th:blcok>
                                    </th:block>
                                    <th:block th:unless="${project.secCvssScore >= 7.0}">
                                         <th:block th:if="${project.secCvssScore == 0}">
                                           <span class="badge badge-blue text-md width-9rem pointer p-1">Discovered(N/A)</span>
                                        </th:block>
                                        <th:block th:unless="${project.secCvssScore == 0}">
                                            <span class="badge badge-blue text-md width-9rem pointer p-1">Discovered([[${project.secCvssScore}]])</span>
                                        </th:block>
                                    </th:block>
                                </th:block>
                                <th:block th:if="${project.secCode == null}">
                                    <th:block th:if="${project.secCvssScore == 0}">
                                        <span class="badge badge-cerebral-gray text-md width-9rem pointer p-1">Discovered(N/A)</span>
                                    </th:block>
                                    <th:block th:unless="${project.secCvssScore == 0}">
                                        <span class="badge badge-cerebral-gray text-md width-9rem pointer p-1">Discovered(N/A)</span>
                                    </th:block>
                                </th:block>
                            </span>
                        </span>
                        </div>
                        <div class="col-sm-2 float-right mt-1">
                            <div class="helpLink f-left dropdown float-right ml-3">
                                <a class="help-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Help</a>
                                <div class="dropdown-menu mt-0">
                                    <a class="dropdown-item" href="#" th:onclick="|openHelpGuideLink('Project_List_Security')|">How to use FossLight Hub</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Main content -->
            <section class="content">
            	<div class="container-fluid">
            		<input type="hidden" name="prjId" th:value="${project.prjId}"/>
                    <div class="card card-dark card-tabs">
                        <div class="card-header p-0 pt-1" style="display:inline-block;">
                        	<div class="float-left" style="display:inline;">
                            	<ul class="nav nav-tabs" id="menu-tab" role="tablist">
                                	<li class="nav-item">
                                    	<a class="nav-link active" id="tabMenuTotal" data-toggle="pill" href="#menu-total" role="tab" aria-controls="menu-total" aria-selected="true" th:text="Total"></a>
                                	</li>
                                	<li class="nav-item">
                                    	<a class="nav-link" id="tabMenuFixed" data-toggle="pill" href="#menu-fixed" role="tab" aria-controls="menu-fixed" aria-selected="false" th:text="Fixed"></a>
                                	</li>
                                	<li class="nav-item">
                                    	<a class="nav-link" id="tabMenuNotFixed" data-toggle="pill" href="#menu-not-fixed" role="tab" aria-controls="menu-not-fixed" aria-selected="false" th:text="'Not Fixed'"></a>
                                	</li>
                            	</ul>
                        	</div>
                        	<div class="float-right mr-3" style="margin-top: .35rem">
                                <button type="button" class="btn btn-purple btn-xs px-3 btnCommentHistory" data-toggle="on" th:text="'Show Comment History'"></button>
                            </div>
                        </div>
                    </div>

					<div class="row pl-2" name="gridArea" id="gridAreaTotal" style="width: 100%; display: none;">
                        <!-- buttons -->
                        <div class="col-md-12 mb-3 pl-2">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="row float-left pl-2">
                                        <button type="button" class="btn btn-yellow-04 btn-sm width-10rem mr-xm px-3" th:onclick="|sec_com_fn.bulkEdit('total')|" th:text="'Bulk Edit'"></button>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="row float-right">
                                        <button type="button" class="btn btn-lg-light-gray btn-sm width-6rem mr-xm px-3" th:onclick="|com_fn.downloadExcel('total')|"><i class="far fa-file-excel mr-2"></i>Export</button>
                                        <button type="button" class="btn btn-lg-teal btn-sm width-6rem px-3" th:onclick="|total.save()|" th:text="Save"></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- grids -->
                        <div class="col-md-12 outerJqGridSet">
                            <table id="totalList"><tr><td></td></tr></table>
                            <div id="totalListPager"></div>
                        </div>
                    </div>
                    
                    <div class="row pl-2" name="gridArea" id="gridAreaFixed" style="width: 100%;display: none;">
                        <!-- buttons -->
                        <div class="col-md-12 mb-3 pl-2">
                            <div class="row">
                            	<div class="col-md-6">
                                    <div class="row float-left pl-2">
                                        <button type="button" class="btn btn-yellow-04 btn-sm width-10rem mr-xm px-3" th:onclick="|sec_com_fn.bulkEdit('fixed')|" th:text="'Bulk Edit'"></button>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="row float-right">
                                        <button type="button" class="btn btn-lg-light-gray btn-sm width-6rem mr-xm px-3" th:onclick="|com_fn.downloadExcel('fixed')|"><i class="far fa-file-excel mr-2"></i>Export</button>
                                        <button type="button" class="btn btn-lg-teal btn-sm width-6rem px-3" th:onclick="|fixed.save()|" th:text="Save"></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- grids -->
                        <div class="col-md-12 outerJqGridSet">
                            <table id="fixedList"><tr><td></td></tr></table>
                            <div id="fixedListPager"></div>
                        </div>
                    </div>
                    
                    <div class="row pl-2" name="gridArea" id="gridAreaNotFixed" style="width: 100%; display: none;">
                        <!-- buttons -->
                        <div class="col-md-12 mb-3 pl-2">
                            <div class="row">
                            	<div class="col-md-6">
                                    <div class="row float-left pl-2">
                                        <button type="button" class="btn btn-yellow-04 btn-sm width-10rem mr-xm px-3" th:onclick="|sec_com_fn.bulkEdit('notFixed')|" th:text="'Bulk Edit'"></button>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="row float-right">
                                        <button type="button" class="btn btn-lg-light-gray btn-sm width-6rem mr-xm px-3" th:onclick="|com_fn.downloadExcel('notfixed')|"><i class="far fa-file-excel mr-2"></i>Export</button>
                                        <button type="button" class="btn btn-lg-teal btn-sm width-6rem px-3" th:onclick="|notFixed.save()|" th:text="Save"></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- grids -->
                        <div class="col-md-12 outerJqGridSet">
                            <table id="notFixedList"><tr><td></td></tr></table>
                            <div id="notFixedListPager"></div>
                        </div>
                    </div>
                </div>
                
                <th:block th:replace="fragments/common-fragments :: loadingWrapFragment"></th:block>
            </section>
            <!-- modal -->
            <div class="modal fade" id="modal-comment">
                <!-- modal dialog -->
                <div class="modal-dialog modal-lg">
                    <!-- modal-content -->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Comment</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <textarea id="compose-textarea-03" class="form-control" style="height: 800px" rows="3">
                                <ul>
                                    <li>List item one</li>
                                    <li>List item two</li>
                                    <li>List item three</li>
                                    <li>List item four</li>
                                </ul>
                            </textarea>
                        </div>
                        <div class="modal-footer justify-content-between">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary">Save changes</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
            <!--/. modal -->
        </div>
        <footer class="main-footer">
            <div class="float-right d-none d-sm-block">
                <b>Version</b> 3.2.0
            </div>
            <strong>Copyright &copy; 2014-2021 <a href="https://adminlte.io">AdminLTE.io</a>.</strong> All rights
            reserved.
        </footer>
        <!-- Control Sidebar -->
        <aside class="control-sidebar control-sidebar-dark">
        </aside>
        <!-- /.control-sidebar -->
    </div>
    
    <form id="secBulkEditForm">
		<input type="hidden" name="rowId" value=""/>
		<input type="hidden" name="gridId" value=""/>
		<input type="hidden" name="target" value=""/>
	</form>
</body>
</html>