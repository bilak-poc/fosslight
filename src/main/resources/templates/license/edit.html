<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/html" xmlns:th="http://www.thymeleaf.org">

<th:block th:fragment="content">
    <th:block th:replace="fragments/detail-script :: detailScriptFragment"></th:block>
    <th:block th:replace="fragments/gridCommonFn :: gridCommonFn"></th:block>
    <th:block th:replace="license/edit-script :: contentScript"></th:block>
    <body class="hold-transition sidebar-mini">
    <div class="wrapper">
        <div class="content-wrapper custom-layout" style="height: auto">
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <div class="container-fluid">
                </div><!-- /.container-fluid -->
            </section>
            <section class="content">
                <form action="" id="licenseForm" method="post" name="licenseForm">
                    <input name="licenseId" th:value="${detail?.licenseId}" type="hidden"/>
                    <input name="comment" type="hidden"/>
                    <input name="restriction" type="hidden"/>

                    <div class="row">
                        <div class="col-md-9">
                            <div class="card card-secondary submit-form">
                                <div class="card-header">
                                    <h3 class="card-title text-white">Form</h3>

                                    <div class="card-tools">
                                        <button class="btn btn-tool text-white" data-card-widget="collapse"
                                                title="Collapse"
                                                type="button">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="form-group">
                                        <label for="licenseNameInput" th:text="#{msg.common.field.licenseName}"></label>
                                        <input class="form-control autoComLicenseLong" id="licenseNameInput"
                                               name="licenseName"
                                               th:value="${detail?.licenseName}" type="text">
                                    </div>
                                    <div class="form-group">
                                        <label for="licenseTypeSelect"
                                               th:text="#{msg.common.field.licenseType}"></label>
                                        <select class="select2" id="licenseTypeSelect" name="licenseType"
                                                style="width: 100%;">
                                            <option value=""></option>
                                            <th:block
                                                    th:each="code : ${@CoCodeManager.getCodeDtls(@CommonFunction.getCoConstDefVal('CD_LICENSE_TYPE'))}">
                                                <option th:selected="${#strings.equals(code.cdDtlNo, detail?.licenseType)}" th:text="${code.cdDtlNm}"
                                                        th:value="${code.cdDtlNo}"></option>
                                            </th:block>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label th:text="#{msg.common.field.restriction}"></label>
                                        <select class="select2" id="restrictionSelect" multiple="multiple"
                                                name="restriction" style="width: 100%;">
                                            <option value=""></option>
                                            <option th:each="code : ${@CoCodeManager.getCodeDtls(@CommonFunction.getCoConstDefVal('CD_LICENSE_RESTRICTION'))}"
                                                    th:text="${code.cdDtlNm}"
                                                    th:value="${code.cdDtlNo}"
                                                    th:selected="${detail?.restrictionCdNoList != null and #arrays.contains(detail.restrictionCdNoList, code.cdDtlNo)}">
                                            </option>

                                        </select>
                                    </div>
                                    <div class="form-group clearfix">
                                        <div class="row">
                                            <div class="col-2">
                                                <label th:text="#{msg.common.field.obligation}"></label>
                                            </div>
                                            <div class="col-10">
                                                <div class="icheck-primary d-inline mx-3">
                                                    <input id="obligationNotificationYn"
                                                           name="obligationNotificationYn" th:checked="${#strings.equals(detail?.obligationNotificationYn, 'Y')}" type="checkbox"
                                                           value="Y">
                                                    <label class="text-lg-gray" for="obligationNotificationYn">
                                                        Notice
                                                    </label>
                                                </div>
                                                <div class="icheck-primary d-inline  mx-3">
                                                    <input id="obligationDisclosingSrcYn"
                                                           name="obligationDisclosingSrcYn" th:checked="${#strings.equals(detail?.obligationDisclosingSrcYn, 'Y')}" type="checkbox"
                                                           value="Y">
                                                    <label class="text-lg-gray" for="obligationDisclosingSrcYn">
                                                        Source Code
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="shortIdentifierInput" th:text="#{msg.common.field.SPDX}"></label>
                                        <input class="form-control" id="shortIdentifierInput" name="shortIdentifier"
                                               th:value="${detail?.shortIdentifier}"
                                               type="text">
                                    </div>
                                    <div class="form-group tag-form">
                                        <label th:text="#{msg.common.field.nickname}"></label>
                                        <div class="input-group">
                                            <input class="form-control" id="input_licenseNicknames" type="text">
                                            <div class="input-group-append">
                                                <button class="btn btn-default" id="licenseNicknames"
                                                        name="addTagButton"
                                                        type="button">Add
                                                </button>
                                            </div>
                                            <!-- /btn-group -->
                                        </div>
                                    </div>
                                    <div class="form-group d-flex" id="appendArea_licenseNicknames">
                                        <th:block th:each="licenseNickname : ${detail?.licenseNicknames}">
                                            <div class="external-event" name="appendArea_licenseNicknames">
                                                <input name="licenseNicknames" th:value="${licenseNickname}"
                                                       type="hidden"/>
                                                <i class="fas fa-times text-blue-gray float-right mt-1"
                                                   name="deleteTagButton"></i>[[${licenseNickname}]]
                                            </div>
                                        </th:block>
                                    </div>
                                    <div class="form-group tag-form" name="append-stag-form">
                                        <label th:text="#{msg.common.field.licenseWebsite}"></label>
                                        <div class="input-group">
                                            <input class="form-control" id="input_webpages" type="text">
                                            <div class="input-group-append">
                                                <button class="btn btn-default" id="webpages" name="addTagButton"
                                                        type="button">Add
                                                </button>
                                            </div>
                                        </div>
                                        <!-- /btn-group -->
                                    </div>
                                    <div class="form-group d-flex" id="appendArea_webpages">
                                        <th:block th:each="webpage : ${detail?.webpages}">
                                            <div class="external-event" name="webpages">
                                                <input name="webpages" th:value="${webpage}" type="hidden"/>
                                                <i class="fas fa-times text-blue-gray float-right mt-1"
                                                   name="deleteTagButton"></i>[[${webpage}]]
                                            </div>
                                        </th:block>
                                    </div>
                                    <div class="fom-group">
                                        <label for="licenseUserGuide" th:text="#{msg.common.field.userGuide}"></label>

                                        <textarea class="form-control" id="licenseUserGuide" name="description" rows="3"
                                                  th:text="${detail?.description}"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="licenseTextInput" th:text="#{msg.common.field.licenseText}"></label>
                                        <textarea class="form-control" id="licenseTextInput" name="licenseText"
                                                  th:text="${detail?.licenseText}"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="attributionInput" th:text="#{msg.common.field.attribution}"></label>
                                        <textarea class="form-control" id="attributionInput" name="attribution"
                                                  th:text="${detail?.attribution}"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="commentInput">Comment</label>
                                        <textarea class="form-control" id="commentInput" name='commentInput'
                                                  rows="3" style="height: 800px"></textarea>
                                    </div>
                                </div>
                                <div class="card-footer clearfix">
                                    <a class="btn btn-secondary float-left" href="javascript:void(0)"
                                       id="delete">Delete</a>
                                    <a class="btn btn-teal-01 float-right" href="javascript:void(0)" id="save">Save</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card card-lg-red">
                                <div class="card-header">
                                    <h3 class="card-title">Comment</h3>
                                    <div class="card-tools">
                                        <button class="btn btn-tool text-white" data-card-widget="collapse"
                                                title="Collapse"
                                                type="button">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="row" id="commentAreaFragment">
                                        <div class="col-md-12" >
                                            <strong class="text-lg-gray">No comments were registered.</strong>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </section>
            <!-- modal -->
            <div class="modal fade" id="modal-comment">
                <th:block th:replace="fragments/comment-fragments :: commentPopupFragment"></th:block>
            </div>
            <!--/. modal -->
        </div>
    </div>
    </body>
</th:block>